"use strict";
var chai_1 = require("chai");
var Lint = require("tslint");
var options = {
    fix: false,
    formatter: 'json',
    formattersDirectory: 'dist/formatters/',
    rulesDirectory: 'dist/rules/'
};
function testScript(rule, scriptText, config) {
    var linter = new Lint.Linter(options);
    linter.lint(rule + ".ts", scriptText, config);
    var failures = JSON.parse(linter.getResult().output);
    return failures.length === 0;
}
exports.testScript = testScript;
function fix(rule, scriptText, config) {
    var linter = new Lint.Linter(options);
    linter.lint(rule + ".ts", scriptText, config);
    var fixes = linter.getResult().failures.filter(function (f) { return f.hasFix(); }).map(function (f) { return f.getFix(); });
    return Lint.Fix.applyAll(scriptText, fixes);
}
exports.fix = fix;
function makeTest(rule, scripts, expected, config) {
    if (!config) {
        config = {
            rules: {}
        };
        config.rules[rule] = true;
    }
    scripts.forEach(function (code) {
        var res = testScript(rule, code, config);
        chai_1.expect(res).to.equal(expected, code);
    });
}
exports.makeTest = makeTest;
function makeFixTest(rule, inputs, outputs, config) {
    if (!config) {
        config = {
            rules: {}
        };
        config.rules[rule] = true;
    }
    inputs.forEach(function (code, index) {
        var res = fix(rule, code, config);
        chai_1.expect(res).to.equal(outputs[index], code);
    });
}
exports.makeFixTest = makeFixTest;

//# sourceMappingURL=data:application/json;charset=utf8;base64,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
